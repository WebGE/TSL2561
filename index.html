<!DOCTYPE html>
<html>

<head>
	<meta charset='utf-8' />
	<meta http-equiv="X-UA-Compatible" content="chrome=1" />
	<meta name="description" content="Mesurer la luminosité ambiante avec un TSL2561 : Programme de test en C# et description de la classe LightSensor"
	/>
	<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
	<title>TSL2561</title>
</head>

<body>

	<!-- HEADER -->
	<div id="header_wrap" class="outer">
		<header class="inner">
			<a id="forkme_banner" href="https://github.com/WebGE/TSL2561">View on GitHub</a>
			<h1 id="project_title">Capteur de luminosité ambiante TSL2561 (I²C)</h1>
			<h2 id="project_tagline">Description de la classe
				<strong>
					<em>TSL2561</em>
				</strong> développée en C# sous .NETMF 4.3 pour les cartes Netduino et FEZ (PANDA, COBRA...)</h2>
			<section id="downloads">
				<a class="zip_download_link" href="https://github.com/WebGE/TSL2561/zipball/master">Download this project as a .zip file</a>
				<a class="tar_download_link" href="https://github.com/WebGE/TSL2561/tarball/master">Download this project as a tar.gz file</a>
			</section>
		</header>
	</div>

	<!-- MAIN CONTENT -->
	<div id="main_content_wrap" class="outer">
		<section id="main_content" class="inner">
			<hr>
			<h4>Sommaire</h4>
			<ol>
				<li>LE MATERIEL
					<ol>
						<li>Le circuit intégré TSL2561: LIGHT-TO-DIGITAL CONVERTER</li>
						<li>
							<a href="#DUINO">Les cartes Netduino</a>
						</li>
						<li>
							<a href="#FEZ">Les cartes FEZ</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="#LOG">LE LOGICIEL</a>
					<ol>
						<li>
							<a href="#REP">Contenu du répertoire proposé au téléchargement</a>
						</li>
						<li>
							<a href="#NUGET">Le NuGet MicroToolsKit</a>
						</li>
						<li>
							<a href="#WIKI">Le wiki .NetMF v4.3</a>
						</li>
						<li>
							<a href="#DESC">Description et utilisation de la classe TSL2561</a>
						</li>
					</ol>
				</li>
				<li>LES FASCICULES
					<ol>
						<li>
							<a href="http://webge.dyndns-server.com/dokuwiki/doku.php?id=netmf43:accueilnetmf" target="_blank">Exemples codés en C# pour les cartes Netduino et Fez (Panda 3, BrainPad)</a>
						</li>
					</ol>
				</li>
				<li>
					<a href="http://webge.dyndns-server.com/dokuwiki/doku.php?id=netmf43:6_microtoolskit" target="_blank">La page du projet MicroToolsKit</a>
				</li>

			</ol>
			<hr>
			<h3>1. LE MATERIEL</h3>
			<hr>
			<h4>1.1 Le circuit intégré TSL2561: LIGHT-TO-DIGITAL CONVERTER</h4>
			<hr>
			<p>Le capteur TSL2561 mesure la luminosité ambiante de
				<strong>0,1 à 40000 Lux</strong>. Il communique avec un microcontrôleur via un bus
				<strong>I²C.</strong>
			</p>
			<p>Ce capteur couvre la lumière visible et les infrarouges grâce à deux diodes. Cela signifie que vous pouvez mesurer séparément
				la lumière infrarouge, la lumière visible ou le spectre complet. </p>
			<p align="center">
				<img src="images/tsl2561spectrum_MED.png">
			</p>
			<ul>
				<li>
					<strong>Alimentation: </strong>2,7 à 3,6 Vcc</li>
				<li>
					<strong>Interface: </strong> I²C</li>
				<li>
					<strong>Plage de mesure: </strong> 0,1 à 40000 Lux</li>
				<li>
					<strong>Température de service: </strong> -30 à +80 °C</li>
				<li>
					<strong>Documentation: </strong>
					<a href="http://www.adafruit.com/datasheets/TSL2561.pdf" target="_blank">TSL2561 LIGHT-TO-DIGITAL CONVERTER</a>
				</li>
				<li>
					<strong>Distributeur: </strong>
					<a href="http://www.gotronic.fr/rechercher.htm" target="_blank">Gotronic</a>
				</li>
			</ul>
			<hr>
			<h3>
				<a name="modules" class="anchor" href="#modules">
					<span class="octicon octicon-link"></span>
				</a>Modules TSL2561</h3>
			<hr>
			<table align="center">
				<tr align="center">
					<td>
						<strong>Adafruit</strong>
					</td>
					<td>
						<strong>Grove</strong>
					</td>
				</tr>
				<tr align="center">
					<td>
						<img src="images/ar-capteur-de-luminosite-tsl2561-19569.png">
					</td>
					<td>
						<img src="images/ar-detecteur-de-lumiere-grove-sen10171p-20630.png">
					</td>
				</tr>
				<tr align="center">
					<td>
						<a href="https://learn.adafruit.com/tsl2561/" target="_blank">Documentation</a> -
						<a href="images/light_schem.png">Schéma</a>
					</td>
					<td>
						<a href="http://www.seeedstudio.com/wiki/Grove_-_Digital_Light_Sensor" target="_blank">Documentation</a> -
						<a href="images/Digital Light Sensor V1.JPG">Schéma</a>
					</td>
				</tr>
			</table>
			<hr>

			<h4 id="DUINO">1.2 Les cartes Netduino</h4>
			<h5>Secret Labs</h5>
			<hr>
			<ul>
				<li>
					<strong>Microcontrôleur</strong> : STM32F405RG 32 bits à architecture Cortex-M4 cadencé à 168 MHz.</li>
				<li>
					<strong>RAM</strong> : 164KB+.</li>
				<li>
					<strong>Flash</strong> : 1408KB.</li>
				<li>
					<strong>Port Ethernet : </strong> 10/100Mbps (Wifi:802.11b/g/n)*.</li>
				<li>
					<strong>E/S numériques</strong> : 22</li>
				<li>
					<strong>Entrées analogiques</strong> : 6</li>
				<li>
					<strong>Stockage</strong>: carte µSD</li>
				<li>
					<strong>IDE</strong> : Microsoft Visual Studio</li>
				<li>
					<strong>Framework</strong> : .NETMF 4.3</li>
				<li>
					<strong>Langages de programmation</strong> : C#, VB</li>
				<li>
					<strong>Compatibilité</strong> : shield Arduino, Gadgeteer</li>
			</ul>
			<table>
				<tr>
					<td>
						<img src="images/netduino3ethernet.png" alt="Netduino plus 2" target="_blank" />
					</td>
					<td>
						<img src="images/inputandoutput.png" alt="Netduino 3 wifi" target="_blank" />
					</td>
				</tr>
				<tr>
					<td align="center">
						<strong>Netduino 3 Ethernet</strong>
					</td>
					<td align="center">
						<strong>Netduino 3 wifi*</strong>
					</td>
				</tr>
			</table>
			<ul>
				<li>
					<strong>Sites à consulter</strong> :
					<a href="https://www.wildernesslabs.co/" target="_blank">Netduino</a>
				</li>
				<li>
					<strong>Distributeurs</strong> :
					<a href="http://www.mouser.fr/Search/Refine.aspx?Keyword=netduino" target="_blank">Mouser Electronics</a>
				</li>
			</ul>
			<hr>

			<h4 id="FEZ">1.3 Les cartes FEZ</h4>
			<h5>GHI Electonics (Extrait)</h5>
			<hr>
			<ul>
				<li>
					<strong>Microcontrôleur</strong> : 180 MHz 32-bit ARM Cortex-M4.(120 MHz 32-bit ARM Cortex-M3 )*</li>
				<li>
					<strong>SoC(SoM)*</strong> :
					<a href="https://www.ghielectronics.com/products/scm/g80" target="_blank">G80</a>
					<a href="https://www.ghielectronics.com/products/scm/g120e" target="_blank">G120*</a>
				</li>
				<li>
					<strong>RAM</strong> : 156 KB(2.87 MB)*.</li>
				<li>
					<strong>Flash</strong> : 256 KB (13.67 MB)*.</li>
				<li>
					<strong>E/S numériques</strong> : 53(60)*</li>
				<li>
					<strong>Entrées analogiques</strong> : 16(8)*</li>
				<li>
					<strong>Réseaux : </strong> Ethernet TCP/IP, WiFi, and SSL.</li>
				<li>
					<strong>Stockage</strong>: carte µSD</li>
				<li>
					<strong>IDE</strong> : Microsoft Visual Studio</li>
				<li>
					<strong>Framework</strong> : .NETMF 4.3</li>
				<li>
					<strong>Langages de programmation</strong> : C#, VB</li>
			</ul>
			<table>
				<tr>
					<td>
						<img src="images/panda3.png" alt="PANDA III" />
					</td>
					<td>
						<img src="images/cobra3.png" alt="COBRA III" />
					</td>
				</tr>
				<tr>
					<td align="center">
						<strong>PANDA III</strong>
					</td>
					<td align="center">
						<strong>COBRA III* (compatible Gadgeteer)</strong>
					</td>
				</tr>
			</table>
			<ul>
				<li>
					<strong>Sites à consulter</strong> :
					<a href="https://www.ghielectronics.com/" target="_blank">GHI ELECTRONICS</a>
				</li>
				<li>
					<strong>Distributeurs</strong> :
					<a href="http://www.mouser.fr" target="_blank">Mouser Electronics</a>
				</li>
			</ul>

			<hr>
			<h3 id="LOG">2. LE LOGICIEL</h3>
			<hr>

			<h4 id="REP">2.1 Contenu du répertoire proposé au téléchargement</h4>
			<p>Le répertoire proposé au téléchargement (au format zip ou tar.gz) contient la solution
				<strong>NetduinoTSL2561</strong> composée : </p>
			<ul>
				<li>Du projet
					<strong>TSL2561 </strong>: le
					<strong>code source</strong> de la classe
					<em>TSL2561</em>.</li>
				<li>Du projet
					<strong>TestTSL2561 </strong>: un exemple d'utilisation de cette classe.</li>
			</ul>
			<hr>

			<h4 id="NUGET">2.2 Le NuGet MicroToolsKit</h4>
			<p>La dernière version
				<strong>compilée</strong> de la classe
				<strong>TSL2561</strong> se situe dans la bibliothèque
				<strong>MicroToolsKit</strong> disponible sur
				<a href="https://www.nuget.org/packages/WebGE.MicroToolsKit/" target="_blank">nuget.org</a>.</p>
			<p align="center">
				<img src="images/NuGet-large.png" />
			</p>
			<p>
				<strong>Organisation des classes</strong> contenues dans MicroToolsKit
				<a href="http://webge.dyndns-server.com/dokuwiki/doku.php?id=netmf43:6_microtoolskit" target="_blank">[lien]</a>
			</p>
			<p>
				<em>Installer cette bibliothèque dans le projet simplifie l'utilisation de la classe.</em>
			</p>
			<hr>

			<h4 id="WIKI">2.3 Le wiki .NetMF v4.3</h4>
			<ul>
				Un wiki est dédié au
				<strong>microframework .Net v4.3</strong>. Il propose au téléchargement :
				<li>Des
					<strong>exemples</strong> de code pour les cartes
					<strong>Netduino</strong>,
					<strong>GHI FEZ (Panda 3, BrainPad, etc.) </strong>.
					<a href=" http://webge.dyndns-server.com/dokuwiki/doku.php?id=netmf43:accueilnetmf" target="_blank">[lien]</a>
				</li>

			</ul>
			<hr>

			<h4 id="DESC">2.4 Description et utilisation de la classe TSL2561</h4>
			<ul>
				<li>
					<strong>Rôle: </strong>Contrôler un capteur TSL2561 via un bus I²C.</li>
				<li>
					<strong>Assembly: </strong>
					<em>MicroToolsKit</em> (disponible sur
					<a href="https://www.nuget.org/packages/WebGE.MicroToolsKit/" target="_blank">nuget.org</a>)</li>
				<li>
					<strong>Espace de noms: </strong>
					<em>Microtoolskit.Hardware.Sensors</em>
				</li>
			</ul>
			<hr/>
			<p>
				<strong>Création d'un projet avec l'IDE Visual Studio</strong>
			</p>
			<ol>
				<li>
					<strong>Créer </strong>un nouveau projet en suivant la démarche décrite dans le chapitre
					<em>"Premier programme en C# étape par étape"</em> avec à une carte
					<strong>Netduino</strong> ou avec une carte
					<strong>Fez (Panda 3, BrainPad, etc.)</strong>.
					<a href=" http://webge.dyndns-server.com/dokuwiki/doku.php?id=netmf43:accueilnetmf " target="_blank">[lien]</a>
				</li>
				<li>
					<strong>Utiliser</strong> le gestionnaire de paquets NuGet pour
					<strong>ajouter</strong> l'assembly
					<strong>MicroToolsKit</strong> (disponible sur
					<a href="https://www.nuget.org/packages/WebGE.MicroToolsKit/" target="_blank">nuget.org</a>) dans le répertoire
					<em>Références</em> du projet.(clic droit sur
					<em>Références</em> dans le gestionnaire de solutions de Visual Studio puis
					<em>Gérer les packages NuGet...</em>)</li>
				<li>
					<strong>Ajouter</strong> l'espace de noms
					<strong>Microtoolskit.Hardware.Sensors</strong> dans l'en-tête du fichier source.
				</li>
				<li>
					<strong>Créer</strong> un objet en utilisant un des constructeurs
					<em>TSL2561</em>.</li>
				<li>
					<strong>Initialiser</strong> le circuit avec la méthode
					<strong>Init</strong> et les paramètres appropriés.</li>
				<li>
					<strong>Lire</strong> la luminosité ambiante avec la méthode
					<strong>CalculateLux</strong>
				</li>
			</ol>
			<hr/>

			<p>
				<strong>Constructeurs</strong>
			</p>
			<table>
				<tr>
					<td></td>
					<td>
						<strong>Syntaxe</strong>
					</td>
					<td>
						<strong>Description</strong>
					</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>TSL2561()</strong>
					</td>
					<td>Instancie un objet "TSL2561".
						<br>Addresse
						<strong>SLA</strong> sur le bus I²C = 0x29.
						<br/>Fréquence du signal SCL = 100kHz.</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>TSL2561</strong>(
						<strong>byte</strong>
						<em>I2C_Add_7bits</em>)</td>
					<td>Instancie un objet "TSL2561".
						<br>
						<em>I2C_Add_7bits: </em>à définir en fonction de l'état de la broche d'adresse (GND)0x29, (VDD)0x49, (FLOAT)0x69.
						<br>Fréquence du signal SCL = 100kHz.</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>TSL2561</strong>(
						<strong>byte</strong>
						<em>I2C_Add_7bits</em>,
						<strong>UInt16</strong>
						<em>Frequency</em>)</td>
					<td>Instancie un objet "TSL2561".
						<br>
						<em>I2C_Add_7bits: </em> à définir en fonction de l'état de la broche d'adresse (GND)0x29, (VDD)0x49, (FLOAT)0x69.
						<br>
						<em>Fréquence du signal SCL: </em>à définir dans l'intervalle [100kHz,400kHz].</td>
				</tr>
			</table>

			<p>
				<strong>Enumérations</strong>
			</p>
			<table width="100%">
				<tr>
					<td></td>
					<td>
						<strong>Syntaxe</strong>
					</td>
					<td>
						<strong>Description</strong>
					</td>
				</tr>
				<tr>
					<td>
						<img src="images/Enumerator_16x.png">
					</td>
					<td>
						<strong>Gain</strong>
					</td>
					<td>x1 : Fixe le gain à 1 (par défaut)
						<br /> x16 : Fixe le gain à 16
					</td>
				</tr>
				<tr>
					<td>
						<img src="images/Enumerator_16x.png">
					</td>
					<td>
						<strong>IntegrationTime</strong>
					</td>
					<td>
						_13MS : 13,7ms (par défaut)
						<br /> _101MS : 101ms
						<br /> _402MS : 402ms
					</td>
				</tr>
			</table>

			<p>
				<strong>Propriétés</strong>
			</p>
			<table>
				<tr>
					<td></td>
					<td>
						<strong>Syntaxe</strong>
					</td>
					<td>
						<strong>Description</strong>
					</td>
				</tr>
				<tr>
					<td>
						<img src="images/Property_20x.png">
					</td>
					<td>
						<strong>Channel0</strong>
					</td>
					<td>Retourne un mot de 16 bits non signé représentatif de la lumière ambiante.</td>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>Channel1</strong>
						</td>
						<td>Retourne un mot de 16 bits non signé représentatif des infrarouges.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>Control</strong>
						</td>
						<td>Retourne la valeur contenue dans le registre "CONTROL". Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>id</strong>
						</td>
						<td>Retourne la valeur contenue dans le registre "ID".
							<br/>Octet non signé:
							<br/> - quartet de poids fort : (0)TSL2560 (1)TSL2561
							<br/> - quartet de poids faible : valeur de l'identifiant du composant
						</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>interrupt</strong>
						</td>
						<td>Retourne une valeur représentative du réglage des interruptions. Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>threshhighhigh</strong>
						</td>
						<td>Retourne ou fixe la valeur maximum du seuil haut de luminosité. Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>threshhighLow</strong>
						</td>
						<td>Retourne ou fixe la valeur minimum du seuil haut de luminosité. Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>threshLowhigh</strong>
						</td>
						<td>Retourne ou fixe la valeur maximum du seuil bas de luminosité. Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>threshLowLow</strong>
						</td>
						<td>Retourne ou fixe la valeur minimum du seuil bas de luminosité. Octet non signé.</td>
					</tr>
					<tr>
						<td>
							<img src="images/Property_20x.png">
						</td>
						<td>
							<strong>timing</strong>
						</td>
						<td>Retourne la valeur contenue dans le registre "TIMING". Octet non signé.</td>
					</tr>
			</table>

			<p>
				<strong>Méthodes</strong>
			</p>
			<table>
				<tr>
					<td></td>
					<td>
						<strong>Syntaxe</strong>
					</td>
					<td>
						<strong>Description</strong>
					</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>float CalculateLux()</strong>
					</td>
					<td>Renvoi la mesure de la luminosité ambiante en Lux.</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>void Dispose()</td>
					<td>Libère le bus I²C.</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>void Init()</strong>
					</td>
					<td>Initialise le composant avec:
						<br/> gain = 1 et
						<br/>integrationTime = 13ms</td>
				</tr>
				<tr>
					<td>
						<img src="images/Method_16x.png">
					</td>
					<td>
						<strong>void Init</strong>(
						<strong>Gain</strong>
						<em>gain</em>,
						<strong>IntegrationTime</strong>
						<em>IT</em>)</td>
					<td>Les paramètres
						<em>gain</em> et
						<em>IT</em> peuvent être réglés avec les valeurs des énumérations ci-dessus.</td>
				</tr>
			</table>

		</section>
	</div>

	<!-- FOOTER  -->
	<div id="footer_wrap" class="outer">
		<footer class="inner">
			<p class="copyright">Description de la classe
				<strong>
					<em>TSL2561</em>
				</strong> développée en C# sous .NETMF 4.3 pour les cartes Netduino et FEZ (PANDA, COBRA...) maintained by
				<a href="https://github.com/WebGE">WebGE</a>
			</p>
			<p>Published with
				<a href="http://pages.github.com">GitHub Pages</a>
			</p>
		</footer>
	</div>

</body>

</html>